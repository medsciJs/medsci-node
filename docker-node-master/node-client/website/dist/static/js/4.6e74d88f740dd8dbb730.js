webpackJsonp([4,24],{"+LUZ":function(t,e,i){var n=i("/hZu");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("4aa0b051",n,!0)},"/hZu":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.pre-ipt[data-v-494392c2] {\n  padding: 20px 10px;\n  background: #eef1f6;\n}\n.el-input[data-v-494392c2] {\n  width: 68%;\n}\nb[data-v-494392c2] {\n  color: #32c5d2 !important;\n  font-size: 14px;\n}\n",""])},"1n1L":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n*[data-v-2b110e66] {\n  padding: 0;\n  margin: 0;\n}\n.circle[data-v-2b110e66] {\n  display: inline-block;\n  background-color: #F2F6FC;\n  height: 80px;\n  width: 80px;\n  border-radius: 50%;\n  text-align: center;\n  line-height: 80px;\n  position: relative;\n}\nb[data-v-2b110e66] {\n  color: #67C23A;\n  font-size: 40px;\n  vertical-align: middle;\n}\n.el-icon-caret-left[data-v-2b110e66] {\n  font-size: 60px;\n  vertical-align: middle;\n  color: #F2F6FC;\n}\n.frame[data-v-2b110e66] {\n  height: 80px;\n  background-color: #F2F6FC;\n  margin-left: 120px;\n  width: 100%;\n  text-align: left;\n  line-height: 80px;\n  position: relative;\n}\n.box[data-v-2b110e66] {\n  padding: 20px;\n  padding-right: 20px;\n}\n.text[data-v-2b110e66], .text1[data-v-2b110e66], .gray[data-v-2b110e66] {\n  font-size: 14px;\n  line-height: 14px;\n}\n.text[data-v-2b110e66] {\n  vertical-align: middle;\n  color: #F56C6C;\n  font-weight: 600;\n  display: inline-block;\n}\n.add[data-v-2b110e66] {\n  margin-right: 120px;\n  color: #67C23A;\n  border-color: #67C23A;\n  position: absolute;\n  right: 0;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\nheader[data-v-2b110e66] {\n  padding-top: 10px;\n}\nfooter[data-v-2b110e66] {\n  padding-top: 20px;\n}\n.line[data-v-2b110e66] {\n  position: absolute;\n  bottom: -20px;\n  height: 20px;\n  width: 2px;\n  background-color: #F2F6FC;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\nli[data-v-2b110e66] {\n  padding-top: 20px;\n  position: relative;\n}\n.p[data-v-2b110e66] {\n  width: 100%;\n  height: 18px;\n  font-size: 14px;\n  margin-top: -95px;\n  margin-left: 26px;\n  color: #909399;\n}\n.p .title[data-v-2b110e66] {\n  color: #F56C6C;\n  font-weight: 600;\n  font-size: 14px;\n  margin-right: 30px;\n}\n.p1[data-v-2b110e66] {\n  width: 100%;\n  height: 18px;\n  font-size: 14px;\n  margin-top: 15px;\n  margin-left: 26px;\n  color: #909399;\n}\n.blank[data-v-2b110e66] {\n  background-color: #fff;\n  width: 150px;\n  height: 120px;\n  position: absolute;\n  top: 70%;\n  right: 0;\n  z-index: 2;\n  -webkit-box-shadow: 3px 3px 3px #888888;\n          box-shadow: 3px 3px 3px #888888;\n}\n.blank span[data-v-2b110e66] {\n  border-bottom: 1px solid #F2F6FC;\n  display: inline-block;\n  width: 100%;\n  height: 40px;\n  color: #909399;\n  text-align: center;\n  line-height: 40px;\n  cursor: pointer;\n}\n.blank span[data-v-2b110e66]:nth-child(3) {\n  border: none;\n}\n",""])},"3DP0":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},CTlF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),o=i("rv7d"),a=(i("NYxO"),{data:function(){return{dialogTableVisible:!1,hidden:!1,isAdd:!0,ruleForm:{userId:"1",projectId:"1",id:"1",workFlowName:"",workFlowEnglishName:"",workFlowStatus:"",deleteStatus:"",companyId:""},rules:{workFlowName:[{required:!0,message:"请填写显示名称",trigger:"change"}]},getOneEmail:{companyId:"1",userId:"",projectId:"1",id:""}}},computed:{},mounted:function(){this.ruleForm.companyId=this.getOneEmail.companyId=this.companyId,this.ruleForm.userId=this.getOneEmail.userId=this.mixinUser.userId,this.ruleForm.projectId=this.getOneEmail.projectId=this.projectId},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.ruleForm.emailSsl=!0===e.ruleForm.emailSsl?1:2,e.isAdd?e.add():e.change(),e.dialogTableVisible=!1})},change:function(){var t=this;this.ruleForm.workFlowStatus=1==this.ruleForm.workFlowStatus?1:2,this.ruleForm.workFlowStatus=1==this.ruleForm.workFlowStatus?1:2,Object(o.k)(this.ruleForm).then(function(e){200==e.meta.code&&(t.$message.success("编辑成功"),t.$emit("getList"))})},add:function(){var t=this;this.ruleForm.workFlowStatus=2,Object(o.b)(this.ruleForm).then(function(e){200==e.meta.code&&(t.$emit("getList"),t.$message.success("新建成功"))})},getMessage:function(){var t=this;this.getOneEmail.id=this.ruleForm.id,req_getEmailOne(this.getOneEmail).then(function(e){if(200==e.meta.code){switch(e.body[0].emailServerType){case 1:e.body[0].emailServerType="POP3";break;case 3:e.body[0].emailServerType="Exchange";break;case 2:e.body[0].emailServerType="IMAP"}e.body[0].emailSsl=1==e.body[0].emailSsl,t.ruleForm=e.body[0],t.ruleForm.id=t.getOneEmail.id,t.ruleForm.companyId=t.companyId,t.ruleForm.userId=t.mixinUser.userId,t.ruleForm.projectId=t.projectId}})},close:function(t){this.resetForm(t),this.dialogTableVisible=!1},resetForm:function(t){this.$refs[t].resetFields()}}}),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("section",[i("el-dialog",{attrs:{title:"新建工作流",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e},close:function(e){t.close("ruleForm")}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"workFlowName"}},[i("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.workFlowName,callback:function(e){t.$set(t.ruleForm,"workFlowName",e)},expression:"ruleForm.workFlowName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"英文名称",prop:"workFlowEnglishName"}},[i("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.workFlowEnglishName,callback:function(e){t.$set(t.ruleForm,"workFlowEnglishName",e)},expression:"ruleForm.workFlowEnglishName"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("重置")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.close("ruleForm")}}},[t._v("关闭")])],1)],1)],1)],1)])},staticRenderFns:[]};var l={data:function(){return{tableData:[],search:{pageIndex:0,pageSize:10,userId:"string",projectId:"string",id:"string",companyId:"13"},total:"",list:[{userId:"1",loginName:"sdfsd",trueName:"sdfd",phoneNum:"1223434",email:"sfd@d.cn",sexName:"string",createTime:"2018-07-09 09:09:09"},{userId:"231231231",loginName:"string",trueName:"string",phoneNum:"string",email:"sfd@d.cn",sexName:"string",createTime:"2018-07-09 09:09:09"}],loading:!0,del:{userId:"1",projectId:"1",id:"",companyId:"string",updatedBy:"string"},defUpdate:{userId:"1",projectId:"1",id:"",companyId:"13"}}},components:{add:i("VU/8")(a,r,!1,function(t){i("Vy4P")},"data-v-439ed180",null).exports,configure:i("gsgh").default},created:function(){this.defUpdate.companyId=this.search.companyId=this.del.companyId=this.companyId,this.defUpdate.projectId=this.search.projectId=this.del.projectId=this.projectId,this.defUpdate.userId=this.search.userId=this.del.userId=this.mixinUser.userId,this.getMsg()},mounted:function(){},methods:{handleClick:function(t){this.$refs.roles.dialogTableVisible=!0},config:function(t){this.$router.push({name:"configure",params:{id:t.id}})},workFlowDefaultUpdate:function(t){var e=this;console.log(t),this.defUpdate.id=t.id,Object(o.e)(this.defUpdate).then(function(t){200==t.meta.code&&e.getMsg()})},getMsg:function(){var t=this;Object(o.i)(this.search).then(function(e){e.body.forEach(function(t){t.workFlowStatus=1==t.workFlowStatus}),t.tableData=e.body,t.loading=!1,t.total=e.data.total})},searchList:function(){this.getMsg()},clear:function(){this.search.roleCode="",this.search.roleName=""},handleSizeChange:function(t){this.search.pageSize=t,this.getMsg()},handleCurrentChange:function(t){this.search.pageIndex=t,this.getMsg()},add:function(){this.$refs.add.dialogTableVisible=!0,this.$refs.add.isAdd=!0},edit:function(t){var e=this;this.tableData.forEach(function(i){i.id===t.id&&(i.userId=e.mixinUser.userId,i.projectId=e.projectId,e.$refs.add.ruleForm=s()({},i))}),this.$refs.add.dialogTableVisible=!0,this.$refs.add.isAdd=!1},deleteInfo:function(t){var e=this;this.del.id=t.id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.d)(e.del).then(function(t){200==t.meta.code&&(e.$message.success("删除成功"),e.getMsg())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getUsersList:function(t){this.$refs.users.parameter.roleCode=t.roleCode,this.$refs.users.getMessage(),this.$refs.users.roleUsersList=!0}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("section",[i("div",{staticClass:"pre-ipt"},[i("el-row",{attrs:{gutter:20}},[i("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建")])],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"workFlowName",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"nodes",label:"工作流节点",width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"workFlowStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{on:{change:function(i){t.workFlowDefaultUpdate(e.row)}},model:{value:e.row.workFlowStatus,callback:function(i){t.$set(e.row,"workFlowStatus",i)},expression:"scope.row.workFlowStatus"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[i("span",{on:{click:function(i){t.edit(e.row)}}},[i("b",{staticClass:"el-icon-edit"})])]),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[i("span",{on:{click:function(i){t.deleteInfo(e.row)}}},[i("b",{staticClass:"el-icon-delete"})])]),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"工作流配置",placement:"top-start"}},[i("span",{on:{click:function(i){t.config(e.row)}}},[i("b",{staticClass:"el-icon-setting"})])])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.search.pageIndex,"page-sizes":[10,20,40,60],"page-size":t.search.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),i("add",{ref:"add",on:{getList:t.getMsg}})],1)])},staticRenderFns:[]};var c=i("VU/8")(l,d,!1,function(t){i("+LUZ")},"data-v-494392c2",null);e.default=c.exports},Vy4P:function(t,e,i){var n=i("3DP0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("e1215844",n,!0)},gsgh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("rv7d"),s={data:function(){return{dialogTableVisible:!1,dialogConfigVisible:!1,hidden:!1,isAdd:!0,blank:!1,rules:{workFlowName:[{required:!0,message:"请填写显示名称",trigger:"change"}]},wfNodes:{pageIndex:0,pageSize:10,userId:"1",projectId:"1",workflowId:"",companyId:"13",roleId:"1"},list:[],delt:{userId:"1",projectId:"1",id:"",companyId:"13"}}},components:{addNode:i("78du").default},computed:{},mounted:function(){this.delt.companyId=this.wfNodes.companyId=this.companyId,this.delt.projectId=this.wfNodes.projectId=this.projectId,this.delt.userId=this.wfNodes.userId=this.mixinUser.userId,this.getMsg()},methods:{getMsg:function(){var t=this;this.wfNodes.workflowId=this.$route.params.id,Object(n.h)(this.wfNodes).then(function(e){200==e.meta.code&&(e.body.forEach(function(t){t.smsNotification=3==t.smsNotification?"是":"否",t.emailNotification=1==t.emailNotification?"是":"否",t.show=!1}),t.list=e.body,t.$refs.addNode.all=t.list)})},add:function(){this.$refs.addNode.addNode=!0,this.$refs.addNode.isAdd=!0,this.$refs.addNode.ruleForm.workflowId=this.wfNodes.workflowId,this.$refs.addNode.ruleForm.nodeSort=this.list.length+1},show:function(t,e){this.list[e].show=!t},addNext:function(t,e){this.$refs.addNode.isAdd=!0,this.list[e].show=!t,this.$refs.addNode.addNode=!0,this.$refs.addNode.ruleForm.workflowId=this.wfNodes.workflowId,this.$refs.addNode.ruleForm.nodeSort=e+1,this.$refs.addNode.next=!0},edit:function(t,e,i){this.list[e].show=!t,this.$refs.addNode.ruleForm.workflowId=this.wfNodes.workflowId,this.$refs.addNode.id=i,this.$refs.addNode.getOneMsg(),this.$refs.addNode.addNode=!0,this.$refs.addNode.isAdd=!1},del:function(t,e,i){var s=this;this.list[e].show=!t,console.log(),this.delt.id=i,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.c)(s.delt).then(function(t){200==t.meta.code&&(s.$message.success("删除成功"),s.getMsg())})}).catch(function(){s.$message.info("已取消删除")})},close:function(t){this.dialogTableVisible=!1,this.resetForm(t)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("section",{staticClass:"box"},[i("header",[t._m(0),t._v(" "),i("div",{staticClass:"frame"},[i("span",{staticClass:"el-icon-caret-left",staticStyle:{"margin-left":"-39px"}}),t._v(" "),i("el-button",{staticClass:"text",attrs:{type:"text"}},[t._v("开始")]),t._v(" "),i("el-button",{staticClass:"add",attrs:{round:"",icon:"el-icon-plus",size:"mini"},on:{click:t.add}},[t._v("新建")])],1)]),t._v(" "),i("ul",t._l(t.list,function(e,n){return i("li",{key:e.id},[t._m(1,!0),t._v(" "),i("div",{staticClass:"frame"},[i("span",{staticClass:"el-icon-caret-left",staticStyle:{"margin-left":"-39px"}}),t._v(" "),i("div",{staticClass:"p"},[i("span",{staticClass:"title"},[t._v(t._s(e.nodeChineseName))]),i("span",[t._v("创建时间 "+t._s(e.createdTime))])]),t._v(" "),i("div",{staticClass:"p1"},[i("span",{staticStyle:{"margin-right":"30px"}},[t._v("是否启用短信通知："),i("el-button",{attrs:{circle:"",type:"primary",size:"mini"}},[t._v(t._s(e.smsNotification))])],1),t._v(" "),i("span",[t._v("是否启用Email通知："),i("el-button",{attrs:{circle:"",type:"primary",size:"mini"}},[t._v(t._s(e.emailNotification))])],1)]),t._v(" "),i("el-button",{staticClass:"add",attrs:{round:"",size:"mini"},on:{click:function(i){t.show(e.show,n)}}},[t._v("操作 "),i("i",{staticClass:"el-icon-arrow-down"})])],1),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],staticClass:"transition-box blank"},[i("span",{on:{click:function(i){t.addNext(e.show,n)}}},[t._v("新增")]),t._v(" "),i("span",{on:{click:function(i){t.edit(e.show,n,e.id)}}},[t._v("修改")]),t._v(" "),i("span",{on:{click:function(i){t.del(e.show,n,e.id)}}},[t._v("删除")])])])],1)})),t._v(" "),i("footer",[t._m(2),t._v(" "),i("div",{staticClass:"frame"},[i("span",{staticClass:"el-icon-caret-left",staticStyle:{"margin-left":"-39px"}}),t._v(" "),i("el-button",{staticClass:"text",attrs:{type:"text"}},[t._v("结束")])],1)]),t._v(" "),i("addNode",{ref:"addNode",on:{getMsg:t.getMsg}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle fl"},[e("b",{staticClass:"el-icon-location"}),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle fl"},[e("b",{staticClass:"el-icon-location"}),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle fl"},[e("b",{staticClass:"el-icon-location"})])}]};var a=i("VU/8")(s,o,!1,function(t){i("qMVp")},"data-v-2b110e66",null);e.default=a.exports},qMVp:function(t,e,i){var n=i("1n1L");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("71c99e38",n,!0)}});