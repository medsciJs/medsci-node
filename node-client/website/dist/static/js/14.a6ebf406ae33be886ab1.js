webpackJsonp([14],{"QY+V":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.pop[data-v-4e64da62]{\n}\n.file-btn[data-v-4e64da62]{\r\n  position: relative;\n}\n.pop-title[data-v-4e64da62]{\r\n  color: #fff;\r\n  text-align: center;\r\n  padding: 10px 0;\r\n  background: #409EFF;\n}\n.dialog-footer[data-v-4e64da62]{\r\n  text-align: right;\n}\n.el-input[data-v-4e64da62]:first-child{\r\n  width: 67%;\n}\n.file[data-v-4e64da62]{\r\n  width: 80px;\r\n  height: 33px;\r\n  opacity:0;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\n}\n.el-select[data-v-4e64da62]{\r\n  width: 100%;\n}\n.dialog-footer[data-v-4e64da62]{\r\n  text-align: center;\n}\n.el-dialog[data-v-4e64da62]{\r\n  width: 40%;\n}\r\n",""])},cHFw:function(e,t,a){var r=a("yITp");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("a5d67da4",r,!0)},kVWw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),i=a("8obM"),l=a("cpGA"),o={props:["drugId"],data:function(){return{ipt1:"",ipt2:"",ipt3:"",dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},fileKey:"",filePath:null,token:"",select1:[],textarea3:"",formLabelWidth:"120px"}},created:function(){this.getDict("/api/dictionaryInformation/GetDrugAttachInformation","select1")},methods:{changeFile:function(e){this.form.name=e.target.files[0].name.split(".")[0]+(new Date).getTime()+"."+e.target.files[0].name.split(".")[1],this.fileKey=this.form.name,this.filePath=e.target.files[0],this.getToken()},upload:function(){if(""==this.token)return!1;var e={useCdnDomain:!0,region:l.region.z1},t=this,a={next:"",error:"",complete:function(e){t.uploadJava()}};l.upload(this.filePath,this.fileKey,this.token,{},e).subscribe(a)},uploadJava:function(){var e=this,t={attachKey:this.fileKey,attachName:this.filePath.name.split(".")[0],attachSize:this.filePath.size,attachType:this.filePath.name.split(".")[1],drugId:this.drugId,attachDescription:this.textarea3,attachClass:this.form.region,companyId:62,projectId:1,createdUser:"ybb"};Object(i.a)(t).then(function(t){e.dialogFormVisible=!1,e.$emit("uploadSuccess")})},getDict:function(e,t){var a=this,r={url:e};Object(i.q)(r).then(function(e){a[t]=e.body})},getToken:function(){var e=this;Object(i.A)({fileKey:this.fileKey}).then(function(t){e.token=t.body.qiNiuYunTaken})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("el-dialog",{attrs:{title:"上传原始资料",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"pop"},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"附件","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{staticClass:"file-btn",attrs:{type:"primary"}},[e._v("选择文件"),a("input",{staticClass:"file",attrs:{type:"file",name:""},on:{change:e.changeFile}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"文件分类","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.select1,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictDisplayChinese,value:e.dictRealValues}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.textarea3,callback:function(t){e.textarea3=t},expression:"textarea3"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)])],1)])},staticRenderFns:[]};var d=a("VU/8")(o,s,!1,function(e){a("wi+1")},"data-v-4e64da62",null).exports,c={mixins:[a("is1l").a],data:function(){return{ruleForm:{drugGenericZhName:"",drugGenericEnName:"",drugManufacturer:"",drugClass:"",drugFormulation:"",drugGenericStandardName:"",drugActiveIngredients:"",companyId:62,createdUser:"ybb",projectId:"1"},rules:{drugGenericZhName:[{required:!0,message:"请输入通用名称（中文）",trigger:"blur"}],drugGenericEnName:[{required:!0,message:"请输入通用名称（英文）",trigger:"blur"}],drugGenericStandardName:[{required:!0,message:"请输入标准通用名称",trigger:"blur"}],drugActiveIngredients:[{required:!0,message:"请输入活性成分",trigger:"blur"}],drugClass:[{required:!0,message:"请输入药品分类",trigger:"blur"}],drugManufacturer:[{required:!0,message:"请输入生产厂商",trigger:"blur"}],drugFormulation:[{required:!0,message:"请输入剂型",trigger:"blur"}]},tableData:[],drugId:"",pageIndex:"",pageSize:"",select1:[],select2:[],isNew:1,loading:!1}},created:function(){this.drugId=this.$route.query.drugId||"",""!==this.drugId?(this.getList(),this.isNew=0):this.getDrug(),this.getDict("/api/dictionaryInformation/GetDrugFormulationInformation","select1"),this.getDict("/api/dictionaryInformation/GetDrugClassInformation","select2")},methods:{getDrug:function(){var e=this;Object(i.s)({companyId:62}).then(function(t){e.drugId=t.body})},handleCurrentChange:function(e){},upload1:function(){this.$refs.dialog.$data.dialogFormVisible=!0},getList:function(){var e=this,t=n()({},{companyId:this.companyId,projectId:this.projectId,pageIndex:this.pageIndex,pageSize:this.pageSize,drugId:this.drugId});this.loading=!0,Object(i.m)(t).then(function(t){e.ruleForm=n()({},t.body),e.tableData=t.body.drugAttachList,e.loading=!1})},getDict:function(e,t){var a=this,r={url:e};Object(i.q)(r).then(function(e){a[t]=e.body})},uploadTxt:function(e){var t=this,a={companyId:62,drugId:this.drugId,projectId:1};Object(i.C)(a).then(function(e){t.tableData=e.body.map(function(e){return e})})},download:function(e){},delete1:function(e){},save:function(){var e=this;this.ruleForm.drugId=this.drugId,this.ruleForm.companyId=this.companyId,this.ruleForm.projectId=this.projectId,this.ruleForm.pageSize=10,this.ruleForm.pageIndex=1,this.createdUser="ybb",1==this.isNew?Object(i.B)("/api/drugBeforeInformation/AddBeforeDrugInformationSave",this.ruleForm).then(function(t){200==t.meta.code?(e.$message({type:"success",message:"添加成功"}),e.$router.go(-1)):e.$message.error("res.meta.msg")}):Object(i.B)("/api/drugBeforeInformation/EditBeforeDrugInformationSave",this.ruleForm).then(function(t){200==t.meta.code?(e.$message({type:"success",message:"添加成功"}),e.$router.go(-1)):e.$message.error("res.meta.msg")})},cancel:function(){var e=this,t={companyId:62,drugId:this.drugId,projectId:1};Object(i.e)(t).then(function(t){e.$router.push("/preDrug/index")})}},components:{UpDialog:d}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("div",{staticClass:"title Blue"},[e._v("主明细")]),e._v(" "),a("div",{staticClass:"input-pre"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0"}},[a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("通用名称（中文）"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugGenericZhName,callback:function(t){e.$set(e.ruleForm,"drugGenericZhName",t)},expression:"ruleForm.drugGenericZhName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("通用名称（英文）"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugGenericEnName,callback:function(t){e.$set(e.ruleForm,"drugGenericEnName",t)},expression:"ruleForm.drugGenericEnName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("标准化通用名称"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugGenericStandardName,callback:function(t){e.$set(e.ruleForm,"drugGenericStandardName",t)},expression:"ruleForm.drugGenericStandardName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("活性成分"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugActiveIngredients,callback:function(t){e.$set(e.ruleForm,"drugActiveIngredients",t)},expression:"ruleForm.drugActiveIngredients"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("药品分类"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-select",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugClass,callback:function(t){e.$set(e.ruleForm,"drugClass",t)},expression:"ruleForm.drugClass"}},e._l(e.select2,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictDisplayChinese,value:e.dictRealValues}})}))],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("生产厂商"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugManufacturer,callback:function(t){e.$set(e.ruleForm,"drugManufacturer",t)},expression:"ruleForm.drugManufacturer"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"ipt1"}},[a("div",{staticClass:"grid-content bg-purple"},[a("label",[e._v("剂型"),a("em",{staticClass:"font-red"},[e._v("*")])]),e._v(" "),a("el-select",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.drugFormulation,callback:function(t){e.$set(e.ruleForm,"drugFormulation",t)},expression:"ruleForm.drugFormulation"}},e._l(e.select1,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictDisplayChinese,value:e.dictRealValues}})}))],1)])],1)],1),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("div",{staticClass:"title Blue"},[e._v("附件上传")]),e._v(" "),a("div",[a("el-button",{staticClass:"upload",attrs:{type:"primary"},on:{click:e.upload1}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传附件")]),e._v(" "),a("div",{staticClass:"tableData"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"attachName",label:"名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"attachSize",label:"大小",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"attachClass",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"attachType",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"上传时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top-start"}},[a("span",{on:{click:function(a){e.download(t.row)}}},[a("i",{staticClass:"el-icon-download"})])]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[a("span",{on:{click:function(a){e.delete1(t.row)}}},[a("i",{staticClass:"el-icon-delete"})])])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"button_d1"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:""},on:{click:e.cancel}},[e._v("取消")])],1),e._v(" "),a("up-dialog",{ref:"dialog",attrs:{drugId:e.drugId},on:{uploadSuccess:e.uploadTxt}})],1)])},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("cHFw")},"data-v-380f0e3a",null);t.default=p.exports},"wi+1":function(e,t,a){var r=a("QY+V");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("39fb69bf",r,!0)},yITp:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.input-pre[data-v-380f0e3a]{\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  overflow: hidden;\n}\n.input-pre > div[data-v-380f0e3a]{\r\n  width: 50%;\r\n  float: left;\r\n  margin-top: 20px;\n}\n.input-pre > div[data-v-380f0e3a]:nth-child(odd){\r\n  padding-right: 15px;\n}\n.input-pre > div[data-v-380f0e3a]:nth-child(even){\r\n  padding-left: 15px;\n}\n.pre-ipt[data-v-380f0e3a]{\r\n  color: 13px;\r\n  padding: 20px 10px;\r\n  background: #eef1f6;\n}\n.el-input[data-v-380f0e3a]{\n}\n.el-select[data-v-380f0e3a]{\r\n  width: 100%;\n}\n.line[data-v-380f0e3a]{\r\n  text-align: center;\n}\n.app-container[data-v-380f0e3a]{\r\n  background: #fff;\n}\n.el-button[data-v-380f0e3a]{\r\n  height: 33px;\r\n  line-height: 33px;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  padding: 0 20px;\r\n  font-size: 13px;\n}\ni[data-v-380f0e3a]{\r\n  color: #32c5d2;\r\n  font-size: 16px;\n}\n.upload[data-v-380f0e3a]{\r\n  margin-top: 20px;\n}\n.upload i[data-v-380f0e3a]{\r\n  color: #fff;\n}\n.block[data-v-380f0e3a]{\r\n  \r\n  margin-top: 30px;\n}\n.tableData[data-v-380f0e3a]{\r\n  margin-top: 20px;\n}\n.button_d1[data-v-380f0e3a]{\r\n  text-align: center;\r\n  margin-top: 30px;\n}\n.el-form-item[data-v-380f0e3a]{\r\n  width: 50%!important;\r\n  margin-left: 0!important;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\n}\n.el-form-item[data-v-380f0e3a]:nth-child(odd){\r\n  padding-right: 15px;\n}\n.el-form-item[data-v-380f0e3a]:nth-child(even){\r\n  padding-left: 15px;\n}\n.el-form-item[data-v-380f0e3a]{\r\n  float: left;\r\n  margin-bottom: 18px;\n}\n.el-form-item__content[data-v-380f0e3a]{\r\n  line-height: 37px;\n}\r\n",""])}});