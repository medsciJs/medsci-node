webpackJsonp([3,21,25],{"/rOF":function(e,t,r){var a=r("Qxyz");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("21c9d0a7",a,!0)},"5wxl":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("/t6J"),o={data:function(){return{roleUsersList:!1,tableData:[],loading:!1,total:"",parameter:{pageIndex:0,pageSize:10,projectId:"13",roleCode:"",companyId:"1"}}},computed:{},mounted:function(){this.parameter.companyId=this.companyId,this.parameter.projectId=this.projectId},methods:{handleSizeChange:function(e){this.parameter.pageSize=e,this.getMessage()},handleCurrentChange:function(e){this.parameter.pageIndex=e,this.getMessage()},getMessage:function(){var e=this;Object(a.e)(this.parameter).then(function(t){200==t.meta.code&&(e.tableData=t.body,e.total=t.data.total)})},close:function(){this.roleUsersList=!1}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("section",[r("el-dialog",{attrs:{title:"角色用户列表",visible:e.roleUsersList},on:{"update:visible":function(t){e.roleUsersList=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userName",label:"登陆账号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.parameter.pageIndex,"page-sizes":[10,20,40,60],"page-size":e.parameter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("div",{staticClass:"close"},[r("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"info"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1)])},staticRenderFns:[]};var s=r("VU/8")(o,l,!1,function(e){r("/rOF")},"data-v-912ca822",null);t.default=s.exports},KCXr:function(e,t,r){var a=r("igU1");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("10cbd9ce",a,!0)},Qxyz:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.close[data-v-912ca822] {\n  text-align: center;\n}\n",""])},YXEu:function(e,t,r){var a=r("yGLw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("0c227874",a,!0)},"ez+T":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("/t6J"),o=r("nmiN"),l=r("5wxl"),s={data:function(){return{tableData:[],search:{pageIndex:1,pageSize:10,companyId:"string",userId:"string",projectId:"string",roleCode:"",roleName:""},total:"",loading:!0,del:{companyId:"",userId:"",projectId:"",id:"",roleDelete:0,updatedBy:"string",updatedTime:"2018-08-24T09:28:54.454Z"}}},components:{roleBox:o.default,usersBox:l.default},created:function(){this.del.companyId=this.search.companyId=this.companyId,this.del.projectId=this.search.projectId=this.projectId,this.del.userId=this.search.userId=this.mixinUser.userId,this.getMsg()},mounted:function(){},methods:{getMsg:function(){var e=this;Object(a.g)(this.search).then(function(t){e.tableData=t.body,e.loading=!1,e.total=t.data.total})},searchList:function(){this.getMsg()},clear:function(){this.search.roleCode="",this.search.roleName=""},handleSizeChange:function(e){this.search.pageSize=e,this.getMsg()},handleCurrentChange:function(e){this.search.pageIndex=e,this.getMsg()},add:function(){this.$refs.addRole.dialogTableVisible=!0,this.$refs.addRole.isAdd=!0},edit:function(e){this.$refs.addRole.ruleForm.id=e.id,this.$refs.addRole.getMessage(),this.$refs.addRole.dialogTableVisible=!0,this.$refs.addRole.isAdd=!1},deleteInfo:function(e){var t=this;this.del.id=e.id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)(t.del).then(function(e){200==e.meta.code&&(t.$message.success("删除成功"),t.getMsg())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getUsersList:function(e){this.$refs.users.parameter.roleCode=e.roleCode,this.$refs.users.getMessage(),this.$refs.users.roleUsersList=!0},roleJurisdiction:function(e){this.$router.push({path:"/roles/arrList",query:{id:e.roleCode}})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("section",[r("div",{staticClass:"pre-ipt"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("label",[e._v("角色名称")]),e._v(" "),r("el-input",{attrs:{placeholder:"请输入角色名称",clearable:""},model:{value:e.search.roleName,callback:function(t){e.$set(e.search,"roleName",t)},expression:"search.roleName"}})],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("label",[e._v("角色编码")]),e._v(" "),r("el-input",{attrs:{placeholder:"请输入角色编码",clearable:""},model:{value:e.search.roleCode,callback:function(t){e.$set(e.search,"roleCode",t)},expression:"search.roleCode"}})],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"2%"},attrs:{span:6}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.clear}},[e._v("重置")])],1),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.add}},[e._v("新建")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleCode",label:"角色编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleDisplayName",label:"角色展示名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatedTime",label:"更新时间",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[r("span",{on:{click:function(r){e.edit(t.row)}}},[r("b",{staticClass:"el-icon-edit"})])]),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[r("span",{on:{click:function(r){e.deleteInfo(t.row)}}},[r("b",{staticClass:"el-icon-delete"})])]),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用户列表",placement:"top-start"}},[r("span",{on:{click:function(r){e.getUsersList(t.row)}}},[r("b",{staticClass:"el-icon-setting"})])]),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"角色权限",placement:"top-start"}},[r("span",{on:{click:function(r){e.roleJurisdiction(t.row)}}},[r("b",{staticClass:"el-icon-star-on"})])])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.search.pageIndex,"page-sizes":[10,20,40,60],"page-size":e.search.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("roleBox",{ref:"addRole",on:{getList:e.getMsg}}),e._v(" "),r("usersBox",{ref:"users"})],1)])},staticRenderFns:[]};var n=r("VU/8")(s,i,!1,function(e){r("KCXr")},"data-v-70180268",null);t.default=n.exports},igU1:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.pre-ipt[data-v-70180268] {\n  padding: 20px 10px;\n  background: #eef1f6;\n}\n.el-input[data-v-70180268] {\n  width: 68%;\n}\nb[data-v-70180268] {\n  color: #32c5d2 !important;\n  font-size: 14px;\n}\n",""])},nmiN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("/t6J"),o={data:function(){return{dialogTableVisible:!1,hidden:!1,isAdd:!0,roleCode:"",ruleForm:{companyId:"",userId:"",projectId:"",id:"string",roleCode:"",roleName:"",roleDisplayName:"",roleBelongs:"",remark:"",createdBy:"string",createdTime:"2018-08-24T07:49:54.196Z",updatedBy:"string",updatedTime:"2018-08-24T07:49:54.196Z"},rules:{roleCode:[{validator:function(e,t,r){""==t?r(new Error("角色编码")):Object(a.f)(t).then(function(e){200!=e.meta.code?r(new Error("角色编码不能重复")):r()})},trigger:"blur",required:!0}],roleName:[{required:!0,message:"请输入角色名称",trigger:"change"}],roleDisplayName:[{required:!0,message:"请输入角色角色展示名",trigger:"change"}],roleBelongs:[{required:!0,message:"请选择私有角色",trigger:"change"}]},getOneMsg:{companyId:"",userId:"",projectId:"",id:""}}},computed:{},mounted:function(){this.ruleForm.companyId=this.getOneMsg.companyId=this.companyId,this.ruleForm.projectId=this.getOneMsg.projectId=this.projectId,this.ruleForm.userId=this.getOneMsg.userId=this.mixinUser.userId},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(r){if(console.log(123,r),!r)return!1;t.isAdd?Object(a.b)(t.ruleForm).then(function(r){200==r.meta.code&&(t.dialogTableVisible=!1,t.$message.success("新建成功"),t.resetForm(e),t.$emit("getList"))}):t.change()})},change:function(){var e=this;Object(a.i)(this.ruleForm).then(function(t){200==t.meta.code&&(e.dialogTableVisible=!1,e.$message.success("编辑成功"),e.$emit("getList"))})},resetForm:function(e){this.$refs[e].resetFields(),this.ruleForm.emailServerType=""},getMessage:function(){var e=this;this.getOneMsg.id=this.ruleForm.id,Object(a.h)(this.getOneMsg).then(function(t){if(200==t.meta.code){switch(t.body[0].roleBelongs){case 1:t.body[0].roleBelongs="POP3";break;case 3:t.body[0].roleBelongs="Exchange";break;case 2:t.body[0].roleBelongs="IMAP"}e.ruleForm=t.body[0],e.ruleForm.id=e.getOneMsg.id,e.ruleForm.companyId=e.companyId,e.ruleForm.userId=e.mixinUser.userId,e.ruleForm.projectId=e.projectId}})},close:function(e){this.dialogTableVisible=!1,this.resetForm(e)}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("section",[r("el-dialog",{attrs:{title:"新建角色",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t},close:function(t){e.close("ruleForm")}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色编码",prop:"roleCode"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleCode,callback:function(t){e.$set(e.ruleForm,"roleCode",t)},expression:"ruleForm.roleCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleName,callback:function(t){e.$set(e.ruleForm,"roleName",t)},expression:"ruleForm.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色展示名",prop:"roleDisplayName"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleDisplayName,callback:function(t){e.$set(e.ruleForm,"roleDisplayName",t)},expression:"ruleForm.roleDisplayName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"私有角色",prop:"roleBelongs"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择私有角色"},model:{value:e.ruleForm.roleBelongs,callback:function(t){e.$set(e.ruleForm,"roleBelongs",t)},expression:"ruleForm.roleBelongs"}},[r("el-option",{attrs:{label:"POP3",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"IMAP",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"Exchange",value:"3"}})],1)],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",staticStyle:{width:"100%"},attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:function(t){e.close("ruleForm")}}},[e._v("关闭")])],1)],1)],1)],1)])},staticRenderFns:[]};var s=r("VU/8")(o,l,!1,function(e){r("YXEu")},"data-v-1d023dd8",null);t.default=s.exports},yGLw:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"",""])}});