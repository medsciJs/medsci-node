webpackJsonp([3],{"/HhT":function(e,t,n){var o=n("d75v");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("808d30f4",o,!0)},"E/TR":function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},OF11:function(e,t,n){var o=n("RimQ");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("bd0dc846",o,!0)},RimQ:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n@keyframes treeTableShow {\nfrom {opacity: 0;\n}\nto {opacity: 1;\n}\n}\n@-webkit-keyframes treeTableShow {\nfrom {opacity: 0;\n}\nto {opacity: 1;\n}\n}\n",""])},YDHX:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.title[data-v-91edbfb4] {\n  color: #409EFF;\n  font-size: 14px;\n}\n.el-form-item[data-v-91edbfb4] {\n  display: inline-block;\n  width: 49.6%;\n}\n",""])},bUp0:function(e,t,n){"use strict";t.a=function(e){return Object(o.a)({url:"api1/menu/addSysMenu",method:"post",data:e})},t.c=function(e){return Object(o.a)({url:"api1/menu/getMenuByName",method:"post",data:e})},t.b=function(e){return Object(o.a)({url:"api1/menu/deleteMenuById",method:"post",data:e})},t.d=function(e){return Object(o.a)({url:"api1/menu/getMenuInfoById",method:"post",data:e})},t.e=function(e){return Object(o.a)({url:"api1/menu/updateMenuById",method:"post",data:e})};var o=n("vLgD")},d75v:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,'\n.edit[data-v-6e4ab19d] {\n  color: green;\n  font-size: 16px;\n}\n.delete1[data-v-6e4ab19d] {\n  color: red;\n  font-size: 16px;\n}\n.add[data-v-6e4ab19d] {\n  color: blue;\n  font-size: 16px;\n}\n.ms-tree-space[data-v-6e4ab19d] {\n  position: relative;\n  top: 1px;\n  display: inline-block;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1;\n  width: 18px;\n  height: 14px;\n}\n.ms-tree-space[data-v-6e4ab19d]::before {\n    content: "";\n}\n.processContainer[data-v-6e4ab19d] {\n  width: 100%;\n  height: 100%;\n}\ntable td[data-v-6e4ab19d] {\n  line-height: 26px;\n}\n.tree-ctrl[data-v-6e4ab19d] {\n  position: relative;\n  cursor: pointer;\n  color: #2196F3;\n  margin-left: -18px;\n}\n',""])},dXij:function(e,t,n){e.exports={default:n("E/TR"),__esModule:!0}},sS1m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("dXij"),r=n.n(o),a=n("c/Tr"),i=n.n(a),l=n("/5sW");function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];return i()(e).forEach(function(e){void 0===e._expanded&&l.default.set(e,"_expanded",t);var a=1;if(void 0!==o&&null!==o&&(a=o+1),l.default.set(e,"_level",a),n&&l.default.set(e,"parent",n),r.push(e),e.children&&e.children.length>0){var i=s(e.children,t,e,a);r=r.concat(i)}}),r}var u={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||s,n=this.evalArgs?r()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,n)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0},edit:function(e){this.$emit("edit",e)},delete1:function(e){this.$emit("delete1",e)},add:function(e){this.$emit("add",e)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[0===e.columns.length?n("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return n("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(n){e.toggleExpanded(t.$index)}}},[t.row._expanded?n("i",{staticClass:"el-icon-caret-right"}):n("i",{staticClass:"el-icon-caret-bottom"})]):e._e(),e._v("\n      "+e._s(t.$index)+"\n    ")]}}])}):e._l(e.columns,function(t,o){return n("el-table-column",{key:o,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(r){return["操作"!=t.text?n("div",{key:"1"},[e._l(r.row._level,function(t){return 0===o?n("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(o,r.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(r.$index)}}},[r.row._expanded?n("i",{staticClass:"el-icon-caret-right"}):n("i",{staticClass:"el-icon-caret-bottom"})]):e._e(),e._v("\n          "+e._s(r.row[t.value])+"\n      ")],2):n("div",{key:"2"},[n("i",{staticClass:"el-icon-edit edit",on:{click:function(t){e.edit(r.row)}}}),e._v(" "),n("i",{staticClass:"el-icon-delete delete1",on:{click:function(t){e.delete1(r.row)}}}),e._v(" "),n("i",{staticClass:"el-icon-plus add",on:{click:function(t){e.add(r.row)}}})])]}}])})}),e._v(" "),e._t("default")],2)},staticRenderFns:[]};var m=n("VU/8")(u,d,!1,function(e){n("OF11"),n("/HhT")},"data-v-6e4ab19d",null).exports,c=n("bUp0"),p={name:"treeTableDemo",mixins:[n("is1l").a],components:{nxTreeTable:m},data:function(){return{first:!0,columns:[{text:"菜单名称",value:"menuChineseName",width:200},{text:"菜单路由",value:"menuRoute"},{text:"排序",value:"menuSort"},{text:"类型",value:"menuType"},{text:"可见",value:"menuShow"},{text:"标识",value:"menuRemark"},{text:"操作",value:"comment"}],data:[{id:1,event:"事件1",timeLine:100,comment:"无",children:[{id:2,event:"事件2",timeLine:10,comment:"无",children:[{id:10,event:"事件4",timeLine:100,comment:"无"}]},{id:23,event:"权限",timeLine:10,comment:"无"}]},{id:1,event:"事件1",timeLine:100,comment:"无",children:[{id:2,event:"事件2",timeLine:10,comment:"无"}]}],parameter:{pageIndex:1,pageSize:10,companyId:"",userId:"",projectId:"",menuChineseName:""},dialogTableVisible:!1,dis:!0,ruleForm:{companyId:"",userId:"",projectId:"",id:"string",menuCode:"string",parentCode:"",menuChineseName:"",menuEnglishName:"",menuType:0,menuRoute:"",menuPers:"",menuCron:"",menuSort:"",menuShow:1,menuDelete:0,remark:"",createdBy:"string",updatedBy:"string"},isNew:1,rules:{menuType:[{required:!0,message:"请输入菜单类型"}],menuChineseName:[{required:!0,message:"请输入中文名"}],menuEnglishName:[{required:!0,message:"请输入英文名"}],menuRoute:[{required:!0,message:"请输入路由"}],menuPers:[{required:!0,message:"请输入中文名"}],menuSort:[{required:!0,message:"请输入中文名"}]},del:{companyId:"",userId:"",projectId:"",menuCode:""},oneInfo:{companyId:"",userId:"",projectId:"",menuCode:""},isAdd:!0}},methods:{edit:function(e){var t=this;console.log(e),this.isAdd=!1,this.oneInfo.menuCode=e.menuCode,Object(c.d)(this.oneInfo).then(function(n){200==n.meta.code&&(n.body[0].menuType=1==n.body[0].menuType?"菜单":"权限",n.body[0].menuShow=1==n.body[0].menuShow?"显示":"隐藏"),n.body[0].companyId=t.companyId,n.body[0].userId=t.mixinUser.userId,n.body[0].projectId=t.projectId,n.body[0].id="string",n.body[0].menuPers="",n.body[0].menuDelete=0,t.ruleForm=n.body[0],t.ruleForm.menuCode=e.menuCode,t.dialogTableVisible=!0})},resetForm:function(e){this.$refs[e].resetFields()},delete1:function(e){var t=this;console.log(e),this.del.menuCode=e.menuCode,this.$confirm("此操作将永久删除该权限/菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.b)(t.del).then(function(e){200==e.meta.code&&(t.$message.success("删除成功"),t.getMsg())})}).catch(function(){t.$message.info("已取消删除")})},add:function(e){switch(console.log(e),this.isAdd=!0,e._level){case 1:this.ruleForm.menuType="菜单",this.ruleForm.parentCode=e.menuCode,this.dis=!0;break;case 2:this.ruleForm.menuType="权限",this.ruleForm.parentCode=e.menuCode,this.dis=!1;break;case void 0:this.ruleForm.menuType="菜单"}this.dialogTableVisible=!0},close:function(e){this.dialogTableVisible=!1,this.resetForm(e)},getMsg:function(){var e=this;Object(c.c)(this.parameter).then(function(t){200==t.meta.code&&(t.body.forEach(function(e){e.menuType=1==e.menuType?"菜单":"权限",e.menuShow=1==e.menuShow?"显示":"隐藏"}),e.data=t.body)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(n){if(!n)return console.log("error submit!!"),!1;t.ruleForm.menuShow="显示"==t.ruleForm.menuShow?1:2,t.ruleForm.menuType="菜单"==t.ruleForm.menuType?1:2,t.isAdd?Object(c.a)(t.ruleForm).then(function(n){200==n.meta.code&&("菜单"===t.ruleForm.menuType?t.$message.success("菜单新建成功"):(t.$message.success("权限新建成功"),t.getMsg(),t.dialogTableVisible=!1,t.close(e)))}):Object(c.e)(t.ruleForm).then(function(n){200==n.meta.code&&(t.$message.success("编辑成功"),t.getMsg(),t.dialogTableVisible=!1,t.close(e))})})}},created:function(){this.getMsg(),this.del.companyId=this.oneInfo.companyId=this.ruleForm.companyId=this.parameter.companyId=this.companyId,this.del.projectId=this.oneInfo.projectId=this.ruleForm.projectId=this.parameter.projectId=this.projectId,this.del.userId=this.oneInfo.userId=this.ruleForm.userId=this.parameter.userId=this.mixinUser.userId}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1),e._v(" "),n("nx-tree-table",{attrs:{data:e.data,columns:e.columns,border:""},on:{edit:e.edit,delete1:e.delete1,add:e.add}}),e._v(" "),n("div",[n("el-dialog",{attrs:{width:"650px",title:"新建菜单/权限",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t},close:function(t){e.close("ruleForm")}}},[n("span",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),n("div",{staticClass:"line",staticStyle:{margin:"0 0 20px 0"}}),e._v(" "),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"父级菜单",prop:"parentCode"}},[n("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.parentCode,callback:function(t){e.$set(e.ruleForm,"parentCode",t)},expression:"ruleForm.parentCode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[n("el-radio-group",{attrs:{disabled:""},model:{value:e.ruleForm.menuType,callback:function(t){e.$set(e.ruleForm,"menuType",t)},expression:"ruleForm.menuType"}},[n("el-radio",{attrs:{label:"菜单",value:"1"}}),e._v(" "),n("el-radio",{attrs:{label:"权限",value:"2"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"中文名",prop:"menuChineseName"}},[n("el-input",{model:{value:e.ruleForm.menuChineseName,callback:function(t){e.$set(e.ruleForm,"menuChineseName",t)},expression:"ruleForm.menuChineseName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"英文名",prop:"menuEnglishName"}},[n("el-input",{model:{value:e.ruleForm.menuEnglishName,callback:function(t){e.$set(e.ruleForm,"menuEnglishName",t)},expression:"ruleForm.menuEnglishName"}})],1),e._v(" "),e.dis?n("el-form-item",{attrs:{label:"路由",prop:"menuRoute"}},[n("el-input",{model:{value:e.ruleForm.menuRoute,callback:function(t){e.$set(e.ruleForm,"menuRoute",t)},expression:"ruleForm.menuRoute"}})],1):n("el-form-item",{attrs:{label:"权限",prop:"menuPers"}},[n("el-input",{model:{value:e.ruleForm.menuPers,callback:function(t){e.$set(e.ruleForm,"menuPers",t)},expression:"ruleForm.menuPers"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图标",prop:"menuCron"}},[n("el-input",{model:{value:e.ruleForm.menuCron,callback:function(t){e.$set(e.ruleForm,"menuCron",t)},expression:"ruleForm.menuCron"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序(升序)",prop:"menuSort"}},[n("el-input",{model:{value:e.ruleForm.menuSort,callback:function(t){e.$set(e.ruleForm,"menuSort",t)},expression:"ruleForm.menuSort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"可见",prop:"menuShow"}},[n("el-radio-group",{model:{value:e.ruleForm.menuShow,callback:function(t){e.$set(e.ruleForm,"menuShow",t)},expression:"ruleForm.menuShow"}},[n("el-radio",{attrs:{label:"显示"}}),e._v(" "),n("el-radio",{attrs:{label:"隐藏"}})],1)],1),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"title"},[e._v("其它信息")]),e._v(" "),n("div",{staticClass:"line",staticStyle:{margin:"0 0 20px 0"}}),e._v(" "),n("el-form-item",{staticStyle:{display:"block",width:"100%"},attrs:{label:"备注",prop:"remark"}},[n("el-input",{model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){e.close("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(p,h,!1,function(e){n("sWfh")},"data-v-91edbfb4",null);t.default=f.exports},sWfh:function(e,t,n){var o=n("YDHX");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("c8db13a0",o,!0)}});