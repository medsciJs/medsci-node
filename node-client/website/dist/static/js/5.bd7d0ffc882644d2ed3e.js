webpackJsonp([5],{"+7B1":function(e,t,a){var r=a("qAcz");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("9be56f0e",r,!0)},"/t6J":function(e,t,a){"use strict";t.g=function(e){return Object(r.a)({url:"/api1/sysRoles/getSysRoles",method:"post",data:e})},t.b=function(e){return Object(r.a)({url:"/api1/sysRoles/addSysRoles",method:"post",data:e})},t.h=function(e){return Object(r.a)({url:"/api1/sysRoles/getSysRolesById",method:"post",data:e})},t.i=function(e){return Object(r.a)({url:"/api1/sysRoles/updateSysRoles",method:"post",data:e})},t.c=function(e){return Object(r.a)({url:"/api1/sysRoles/delSysRoles",method:"post",data:e})},t.e=function(e){return Object(r.a)({url:"/api1/user/getUsersIdByRoleId",method:"post",data:e})},t.f=function(e){return Object(r.a)({url:"/api1/sysRoles/getRolesByCode/"+e,method:"get"})},t.d=function(e){return Object(r.a)({url:"/api1/roleMenu/getRoleMenuById",method:"post",data:e})},t.a=function(e){return Object(r.a)({url:"/api1/roleMenu/addRoleMenu",method:"post",data:e})};var r=a("vLgD")},NBaf:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.pre-ipt[data-v-d75ba374] {\n  padding: 20px 10px;\n  background: #eef1f6;\n}\n.el-input[data-v-d75ba374] {\n  width: 68%;\n}\nb[data-v-d75ba374] {\n  color: #32c5d2 !important;\n  font-size: 14px;\n}\n",""])},Yffd:function(e,t,a){var r=a("y9AL");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("4e724b22",r,!0)},"ez+T":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("/t6J"),o=a("is1l"),s={mixins:[o.a],data:function(){return{dialogTableVisible:!1,hidden:!1,isAdd:!0,roleCode:"",ruleForm:{companyId:"",userId:"",projectId:"",id:"string",roleCode:"",roleName:"",roleDisplayName:"",roleBelongs:"",remark:"",createdBy:"string",createdTime:"2018-08-24T07:49:54.196Z",updatedBy:"string",updatedTime:"2018-08-24T07:49:54.196Z"},rules:{roleCode:[{validator:function(e,t,a){""==t?a(new Error("角色编码")):Object(r.f)(t).then(function(e){200!=e.meta.code?a(new Error("角色编码不能重复")):a()})},trigger:"blur",required:!0}],roleName:[{required:!0,message:"请输入角色名称",trigger:"change"}],roleDisplayName:[{required:!0,message:"请输入角色角色展示名",trigger:"change"}],roleBelongs:[{required:!0,message:"请选择私有角色",trigger:"change"}]},getOneMsg:{companyId:"",userId:"",projectId:"",id:""}}},computed:{},mounted:function(){this.ruleForm.companyId=this.getOneMsg.companyId=this.companyId,this.ruleForm.projectId=this.getOneMsg.projectId=this.projectId,this.ruleForm.userId=this.getOneMsg.userId=this.mixinUser.userId},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(console.log(123,a),!a)return!1;t.isAdd?Object(r.b)(t.ruleForm).then(function(a){200==a.meta.code&&(t.dialogTableVisible=!1,t.$message.success("新建成功"),t.resetForm(e),t.$emit("getList"))}):t.change()})},change:function(){var e=this;Object(r.i)(this.ruleForm).then(function(t){200==t.meta.code&&(e.dialogTableVisible=!1,e.$message.success("编辑成功"),e.$emit("getList"))})},resetForm:function(e){this.$refs[e].resetFields(),this.ruleForm.emailServerType=""},getMessage:function(){var e=this;this.getOneMsg.id=this.ruleForm.id,Object(r.h)(this.getOneMsg).then(function(t){if(200==t.meta.code){switch(t.body[0].roleBelongs){case 1:t.body[0].roleBelongs="POP3";break;case 3:t.body[0].roleBelongs="Exchange";break;case 2:t.body[0].roleBelongs="IMAP"}e.ruleForm=t.body[0],e.ruleForm.id=e.getOneMsg.id,e.ruleForm.companyId=e.companyId,e.ruleForm.userId=e.mixinUser.userId,e.ruleForm.projectId=e.projectId}})},close:function(e){this.dialogTableVisible=!1,this.resetForm(e)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("el-dialog",{attrs:{title:"新建角色",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t},close:function(t){e.close("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色编码",prop:"roleCode"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleCode,callback:function(t){e.$set(e.ruleForm,"roleCode",t)},expression:"ruleForm.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleName,callback:function(t){e.$set(e.ruleForm,"roleName",t)},expression:"ruleForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色展示名",prop:"roleDisplayName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.roleDisplayName,callback:function(t){e.$set(e.ruleForm,"roleDisplayName",t)},expression:"ruleForm.roleDisplayName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"私有角色",prop:"roleBelongs"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择私有角色"},model:{value:e.ruleForm.roleBelongs,callback:function(t){e.$set(e.ruleForm,"roleBelongs",t)},expression:"ruleForm.roleBelongs"}},[a("el-option",{attrs:{label:"POP3",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"IMAP",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"Exchange",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",staticStyle:{width:"100%"},attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.close("ruleForm")}}},[e._v("关闭")])],1)],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("+7B1")},"data-v-2ffeedbe",null).exports,n={mixins:[o.a],data:function(){return{roleUsersList:!1,tableData:[],loading:!1,total:"",parameter:{pageIndex:0,pageSize:10,projectId:"13",roleCode:"",companyId:"1"}}},computed:{},mounted:function(){this.parameter.companyId=this.companyId,this.parameter.projectId=this.projectId},methods:{handleSizeChange:function(e){this.parameter.pageSize=e,this.getMessage()},handleCurrentChange:function(e){this.parameter.pageIndex=e,this.getMessage()},getMessage:function(){var e=this;Object(r.e)(this.parameter).then(function(t){200==t.meta.code&&(e.tableData=t.body,e.total=t.data.total)})},close:function(){this.roleUsersList=!1}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("el-dialog",{attrs:{title:"角色用户列表",visible:e.roleUsersList},on:{"update:visible":function(t){e.roleUsersList=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"登陆账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.parameter.pageIndex,"page-sizes":[10,20,40,60],"page-size":e.parameter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("div",{staticClass:"close"},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"info"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("Yffd")},"data-v-3e8b2b7c",null).exports,u={mixins:[o.a],data:function(){return{tableData:[],search:{pageIndex:1,pageSize:10,companyId:"string",userId:"string",projectId:"string",roleCode:"",roleName:""},total:"",loading:!0,del:{companyId:"",userId:"",projectId:"",id:"",roleDelete:0,updatedBy:"string",updatedTime:"2018-08-24T09:28:54.454Z"}}},components:{roleBox:i,usersBox:d},created:function(){this.del.companyId=this.search.companyId=this.companyId,this.del.projectId=this.search.projectId=this.projectId,this.del.userId=this.search.userId=this.mixinUser.userId,this.getMsg()},mounted:function(){},methods:{getMsg:function(){var e=this;Object(r.g)(this.search).then(function(t){e.tableData=t.body,e.loading=!1,e.total=t.data.total})},searchList:function(){this.getMsg()},clear:function(){this.search.roleCode="",this.search.roleName=""},handleSizeChange:function(e){this.search.pageSize=e,this.getMsg()},handleCurrentChange:function(e){this.search.pageIndex=e,this.getMsg()},add:function(){this.$refs.addRole.dialogTableVisible=!0,this.$refs.addRole.isAdd=!0},edit:function(e){this.$refs.addRole.ruleForm.id=e.id,this.$refs.addRole.getMessage(),this.$refs.addRole.dialogTableVisible=!0,this.$refs.addRole.isAdd=!1},deleteInfo:function(e){var t=this;this.del.id=e.id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)(t.del).then(function(e){200==e.meta.code&&(t.$message.success("删除成功"),t.getMsg())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getUsersList:function(e){this.$refs.users.parameter.roleCode=e.roleCode,this.$refs.users.getMessage(),this.$refs.users.roleUsersList=!0},roleJurisdiction:function(e){this.$router.push({path:"/roles/arrList",query:{id:e.roleCode}})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("div",{staticClass:"pre-ipt"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("label",[e._v("角色名称")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入角色名称",clearable:""},model:{value:e.search.roleName,callback:function(t){e.$set(e.search,"roleName",t)},expression:"search.roleName"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("label",[e._v("角色编码")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入角色编码",clearable:""},model:{value:e.search.roleCode,callback:function(t){e.$set(e.search,"roleCode",t)},expression:"search.roleCode"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-left":"2%"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.clear}},[e._v("重置")])],1),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.add}},[e._v("新建")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",label:"角色编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDisplayName",label:"角色展示名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatedTime",label:"更新时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[a("span",{on:{click:function(a){e.edit(t.row)}}},[a("b",{staticClass:"el-icon-edit"})])]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[a("span",{on:{click:function(a){e.deleteInfo(t.row)}}},[a("b",{staticClass:"el-icon-delete"})])]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用户列表",placement:"top-start"}},[a("span",{on:{click:function(a){e.getUsersList(t.row)}}},[a("b",{staticClass:"el-icon-setting"})])]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"角色权限",placement:"top-start"}},[a("span",{on:{click:function(a){e.roleJurisdiction(t.row)}}},[a("b",{staticClass:"el-icon-star-on"})])])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.search.pageIndex,"page-sizes":[10,20,40,60],"page-size":e.search.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("roleBox",{ref:"addRole",on:{getList:e.getMsg}}),e._v(" "),a("usersBox",{ref:"users"})],1)])},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(e){a("xF66")},"data-v-d75ba374",null);t.default=m.exports},qAcz:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},xF66:function(e,t,a){var r=a("NBaf");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("a3043764",r,!0)},y9AL:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.close[data-v-3e8b2b7c] {\n  text-align: center;\n}\n",""])}});